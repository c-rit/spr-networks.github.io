"use strict";(self.webpackChunkspr_docs=self.webpackChunkspr_docs||[]).push([[756],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>m});var o=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,o,a=function(e,t){if(null==e)return{};var r,o,a={},n=Object.keys(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=o.createContext({}),p=function(e){var t=o.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},u=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},d="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},c=o.forwardRef((function(e,t){var r=e.components,a=e.mdxType,n=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=p(r),c=a,m=d["".concat(l,".").concat(c)]||d[c]||h[c]||n;return r?o.createElement(m,s(s({ref:t},u),{},{components:r})):o.createElement(m,s({ref:t},u))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var n=r.length,s=new Array(n);s[0]=c;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[d]="string"==typeof e?e:a,s[1]=i;for(var p=2;p<n;p++)s[p]=r[p];return o.createElement.apply(null,s)}return o.createElement.apply(null,r)}c.displayName="MDXCreateElement"},3386:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>n,metadata:()=>i,toc:()=>p});var o=r(7462),a=(r(7294),r(3905));const n={slug:"first-blog-post",title:"Announcing The SPR Project",authors:"ltsrad",tags:["SPR","Hello World"]},s=void 0,i={permalink:"/pages/blog/first-blog-post",source:"@site/blog/2022-01-10-first-blog-post.md",title:"Announcing The SPR Project",description:"Hello, SPR",date:"2022-01-10T00:00:00.000Z",formattedDate:"January 10, 2022",tags:[{label:"SPR",permalink:"/pages/blog/tags/spr"},{label:"Hello World",permalink:"/pages/blog/tags/hello-world"}],readingTime:5.125,hasTruncateMarker:!1,authors:[{name:"Alex Radocea",url:"https://twitter.com/defendtheworld",key:"ltsrad"}],frontMatter:{slug:"first-blog-post",title:"Announcing The SPR Project",authors:"ltsrad",tags:["SPR","Hello World"]},prevItem:{title:"Supernetworks just Released a React User Interface",permalink:"/pages/blog/UI Push"}},l={authorsImageUrls:[void 0]},p=[{value:"Hello, SPR",id:"hello-spr",level:2},{value:"The SPR project is about several things",id:"the-spr-project-is-about-several-things",level:2},{value:"How SPR Came To Be",id:"how-spr-came-to-be",level:2},{value:"What&#39;s Next",id:"whats-next",level:2}],u={toc:p};function d(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,o.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"hello-spr"},"Hello, SPR"),(0,a.kt)("p",null,"I'm happy to start releasing the ",(0,a.kt)("strong",{parentName:"p"},"Secure Programmable Router")," project to the world. I've been running my home WiFi\nwith it for the past few months and I'm beyond excited to give back to the open source community.\nI started working on this project because I think that Linux provides a tremendous amount of agility and\npower for secure home networking but I felt like there was no router project out there that pulled it all together."),(0,a.kt)("h2",{id:"the-spr-project-is-about-several-things"},"The SPR project is about several things"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"A highly secure foundation to operate a home network where using the internet is safe and it's easy to see and control what IoT devices are up to when they are plugged in.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Making home privacy easy instead of begrudgingly sharing telemetry with big data companies.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Open source and empowering developers by lowering the barrier to entry for coding with home networking.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"About reducing the barrier for entry.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Enabling scripting and rapid prototyping.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Adapting modern networking paradigms and tools that can meets today's needs."))),(0,a.kt)("h2",{id:"how-spr-came-to-be"},"How SPR Came To Be"),(0,a.kt)("p",null,"During the past year, I took a serious look at ",(0,a.kt)("a",{parentName:"p",href:"https://opnsense.org/"},"opnsense")," and ",(0,a.kt)("a",{parentName:"p",href:"https://openwrt.org/"},"OpenWRT"),", and ordered over a dozen different wifi routers to set up my home network. I sat down and built and deployed my own OpenWRT images and to set up secure wifi networks to connect with a more serious firewall. What I found was that the setups I had managed to achieve were not only frustrating to manage, but when I went to test their security, I found time and time again that vendor wifi routers were insecure due to fundamental limitations with the network designs. On top of that, they were ",(0,a.kt)("a",{parentName:"p",href:"https://www.zerodayinitiative.com/blog/2021/11/1/pwn2ownaustin"},"riddled with software security holes"),". Unfortunately, running the open source builds of OpenWRT often had degraded performance versus the proprietary vendor patches or required breaking secure boot."),(0,a.kt)("p",null,"I felt frustrated because I felt like I had lost control over my own home network. I had only a basic idea of what I was running and what my devices were doing, let alone the routers themselves. Between smart bulbs and vacuum cleaners and home security cameras and speakers, TVs, gaming consoles, laptops, desktops, streaming devices, more routers, and work equipment, there was a lot of stuff that was online."),(0,a.kt)("p",null,"I've been working in computer security for over 15 years and I often get asked for how to set up a home network."),(0,a.kt)("p",null,"The best advice I could give people for their home wifi was to keep their mission critical systems on a dedicated wifi router, and plug that one into the main wifi router with all the other\n\"stuffs\" that ultimately connects to the internet. This is awkward and requires switching networks or IGMP proxying to do discovery or zeroconf. This doesn't scale well across a multi-office home with repeaters and backhaul. It also doesn't scale well in an apartment where there's competition for radio bandwidth with neighbors for essentially one of only three coveted 80mhz channels on 5ghz."),(0,a.kt)("p",null,'The next best advice was to split out the "whatever" non-critical devices to the guest network, and the mission critical stuff on the main network. Hardening the guest network with isolation breaks discovery and streaming as well. In practice I found that most of the routers I looked at did not have good guest isolation anyway when enabled, something I will blog about later. No exploits are required, because more or less an attacker can just ask a router to send packets for them to work around hostapd\'s AP Isolation feature, and most of the routers will happily do what they do best, route the packets.'),(0,a.kt)("p",null,"At the end of the day though, it's fundamentally a flawed idea to have a shared passphrase across many devices because that passphrase effectively lets devices spoof each other or attempt to intercept traffic, making it tough to truly firewall devices."),(0,a.kt)("p",null,"So then I started looking into enterprise wifi authentication: 802.1x  (EAP-PEAP, EAP-TLS, EAP-PWD). EAP-TLS really is the only secure way to do things since EAP-PEAP suffers from fundamental ",(0,a.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/draft-josefsson-pppext-eap-tls-eap-10#section-5.8"},"man in the middle issues")," that were ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/latelee/hostapd/commit/a190189d221aaef869ae2f52f7ead75b0c327995"},"never fixed"),". Or EAP-PWD (which is almost wpa3) would be great,  if it was supported by more devices and drivers, and well with EAP-TLS, certificate management is pain."),(0,a.kt)("p",null,"I really wished that one could just use a unique passphrase per device. Well, it turns out that yes, that works, and hostapd supports it out of the box. With some logic and ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/spr-networks/hostap/commit/279c5203e4c767701ac9fb7cf31624390437d854"},"usability and correctness fixes")," to hostapd, and it was easy to seamlessly add new devices and their passphrases on the fly."),(0,a.kt)("p",null,"Okay that was great. Next, I created strong device isolation with per-device subnets that could be configured to communicate with other subnets using forwarding rules. The resulting network was a bit too different than the spirit of the networking scripts in OpenWRT, and the patching became unreasonable to expect for upstream to accept, so I started from fresh ground."),(0,a.kt)("p",null,"SPR is implemented for rapid iteration. Services are containerized so that developers can swap out core services or roll up new ones in a testable, reproducible manner. An API drives configuration to allow for customization. SPR Runs off of Ubuntu, with Docker containers, and manages the network with NFTables. It uses hostapd for the base station software, CoreDHCP for DHCP, CoreDNS for DNS, and supports Wireguard."),(0,a.kt)("p",null,"SPR simply enables users to do better than today's status quo. It lets users run a hardened, secure network without restrictive drawbacks. It lets users connect their consumer electronics to the internet with the peace of mind that doing so does not weaken their home network security."),(0,a.kt)("h2",{id:"whats-next"},"What's Next"),(0,a.kt)("p",null,"Today SPR runs as a proof of concept on a Raspberry Pi.  With a USB dongle it's well able to handle over a dozen wifi stations and serve data from the internet with rates up to 500mbps. Work is underway to expand to new systems."),(0,a.kt)("p",null,"I'm currently wrapping up a Web UI to make SPR user friendly. In the near future I'll be posting a road map for what's planned."),(0,a.kt)("p",null,"Want to learn more and discuss? Join the ",(0,a.kt)("a",{parentName:"p",href:"https://discord.gg/WeNKMVTR"},"Discord Chat")))}d.isMDXComponent=!0}}]);