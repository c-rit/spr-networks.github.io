"use strict";(self.webpackChunkspr_docs=self.webpackChunkspr_docs||[]).push([[8985],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return d}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,s=e.originalType,l=e.parentName,u=a(e,["components","mdxType","originalType","parentName"]),f=c(n),d=o,m=f["".concat(l,".").concat(d)]||f[d]||p[d]||s;return n?r.createElement(m,i(i({ref:t},u),{},{components:n})):r.createElement(m,i({ref:t},u))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var s=n.length,i=new Array(s);i[0]=f;var a={};for(var l in t)hasOwnProperty.call(t,l)&&(a[l]=t[l]);a.originalType=e,a.mdxType="string"==typeof e?e:o,i[1]=a;for(var c=2;c<s;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},4235:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return a},metadata:function(){return c},toc:function(){return p}});var r=n(7462),o=n(3366),s=(n(7294),n(3905)),i=["components"],a={},l="DNS",c={unversionedId:"services/dns",id:"services/dns",title:"DNS",description:"CoreDNS is an extensible golang dns server. It powers kubernetes and many other services today.",source:"@site/docs/services/dns.md",sourceDirName:"services",slug:"/services/dns",permalink:"/pages/docs/services/dns",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"DHCP Client",permalink:"/pages/docs/services/dhcp_client"},next:{title:"Extensions",permalink:"/pages/docs/services/extensions"}},u={},p=[{value:"The DNS Service runs off CoreDNS with custom plugins",id:"the-dns-service-runs-off-coredns-with-custom-plugins",level:3},{value:"DNS Configuration Files:",id:"dns-configuration-files",level:3},{value:"Local Mappings",id:"local-mappings",level:3},{value:"DNS over HTTPS",id:"dns-over-https",level:3}],f={toc:p};function d(e){var t=e.components,a=(0,o.Z)(e,i);return(0,s.kt)("wrapper",(0,r.Z)({},f,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"dns"},"DNS"),(0,s.kt)("p",null,"CoreDNS is an extensible golang dns server. It powers kubernetes and many other services today.\nThe server is configured to use DNS over HTTPS upstream for all requests and handles DNS for wireguard and wifi clients. "),(0,s.kt)("h3",{id:"the-dns-service-runs-off-coredns-with-custom-plugins"},"The DNS Service runs off CoreDNS with custom plugins"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://github.com/spr-networks/coredns-block"},"Ad Blocking")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://github.com/spr-networks/coredns-rebinding_protection"},"DNS Rebinding Protection")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://github.com/spr-networks/coredns-jsonlog"},"JSON Log"))),(0,s.kt)("h3",{id:"dns-configuration-files"},"DNS Configuration Files:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://github.com/spr-networks/super/blob/main/base/template_configs/dns/Corefile"},"Corefile"))),(0,s.kt)("h3",{id:"local-mappings"},"Local Mappings"),(0,s.kt)("p",null,'CoreDNS is configured to use Local Mappings of names from DHCP. If a device DHCPs\nwith a client name of "test", "test.lan" resolves with the LAN IP address.'),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"hosts /state/dns/local_mappings {\n  ttl 60\n  reload 30s\n  fallthrough\n}\n")),(0,s.kt)("h3",{id:"dns-over-https"},"DNS over HTTPS"),(0,s.kt)("p",null,"The config for SPR is using DNS over HTTPS by default for all upstream requests."),(0,s.kt)("p",null,(0,s.kt)("img",{loading:"lazy",alt:"dns over https",src:n(3610).Z,width:"1324",height:"740"})),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"https://github.com/spr-networks/super/tree/main/dns"}," \u21e8 View the code")))}d.isMDXComponent=!0},3610:function(e,t,n){t.Z=n.p+"assets/images/spr-dns-over-https-d331bec246bb1c72584d251e64faccc9.png"}}]);